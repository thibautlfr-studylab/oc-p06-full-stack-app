<div class="auth-container">
  <div class="auth-nav">
    <button (click)="goBack()" class="back-button">
      <mat-icon>arrow_back</mat-icon>
    </button>
    <h1 class="auth-title">Inscription</h1>
  </div>

  <div class="auth-content">
    <form (ngSubmit)="onSubmit()" [formGroup]="registerForm" class="auth-form">
      <mat-form-field appearance="outline" class="form-field">
        <mat-label>Nom d'utilisateur</mat-label>
        <input formControlName="username" matInput type="text">
        @if (registerForm.get('username')?.hasError('required')) {
          <mat-error>Ce champ est requis</mat-error>
        }
        @if (registerForm.get('username')?.hasError('minlength')) {
          <mat-error>Minimum 3 caract√®res</mat-error>
        }
      </mat-form-field>

      <mat-form-field appearance="outline" class="form-field">
        <mat-label>Adresse e-mail</mat-label>
        <input formControlName="email" matInput type="email">
        @if (registerForm.get('email')?.hasError('required')) {
          <mat-error>Ce champ est requis</mat-error>
        }
        @if (registerForm.get('email')?.hasError('email')) {
          <mat-error>Email invalide</mat-error>
        }
      </mat-form-field>

      <mat-form-field appearance="outline" class="form-field">
        <mat-label>Mot de passe</mat-label>
        <input formControlName="password" matInput type="password">
      </mat-form-field>

      @if (registerForm.get('password')?.value && getPasswordErrors().length > 0) {
        <div class="password-requirements">
          <p class="requirements-title">Le mot de passe doit contenir :</p>
          <ul class="requirements-list">
            @for (error of getPasswordErrors(); track error) {
              <li class="requirement-item invalid">{{ error }}</li>
            }
          </ul>
        </div>
      }

      @if (errorMessage) {
        <div class="error-message">{{ errorMessage }}</div>
      }

      <button [disabled]="isLoading" class="submit-button" color="primary" mat-flat-button type="submit">
        {{ isLoading ? 'Inscription...' : "S'inscrire" }}
      </button>
    </form>
  </div>
</div>
