<div class="auth-container">
  <div class="auth-nav">
    <button class="back-button" (click)="goBack()">
      <mat-icon>arrow_back</mat-icon>
    </button>
    <h1 class="auth-title">Inscription</h1>
  </div>

  <div class="auth-content">
    <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" class="auth-form">
      <mat-form-field appearance="outline" class="form-field">
        <mat-label>Nom d'utilisateur</mat-label>
        <input matInput formControlName="username" type="text">
        @if (registerForm.get('username')?.hasError('required')) {
          <mat-error>Ce champ est requis</mat-error>
        }
        @if (registerForm.get('username')?.hasError('minlength')) {
          <mat-error>Minimum 3 caracteres</mat-error>
        }
      </mat-form-field>

      <mat-form-field appearance="outline" class="form-field">
        <mat-label>Adresse e-mail</mat-label>
        <input matInput formControlName="email" type="email">
        @if (registerForm.get('email')?.hasError('required')) {
          <mat-error>Ce champ est requis</mat-error>
        }
        @if (registerForm.get('email')?.hasError('email')) {
          <mat-error>Email invalide</mat-error>
        }
      </mat-form-field>

      <mat-form-field appearance="outline" class="form-field">
        <mat-label>Mot de passe</mat-label>
        <input matInput formControlName="password" type="password">
      </mat-form-field>

      @if (registerForm.get('password')?.value) {
        <div class="password-requirements">
          <p class="requirements-title">Le mot de passe doit contenir :</p>
          <ul class="requirements-list">
            @for (error of getPasswordErrors(); track error) {
              <li class="requirement-item invalid">{{ error }}</li>
            }
          </ul>
        </div>
      }

      @if (errorMessage) {
        <div class="error-message">{{ errorMessage }}</div>
      }

      <button mat-flat-button color="primary" type="submit" class="submit-button" [disabled]="isLoading">
        {{ isLoading ? 'Inscription...' : "S'inscrire" }}
      </button>
    </form>
  </div>
</div>
